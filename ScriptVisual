-- Roblox GUI Loading Script by HANZSCRIPTS

-- Player & GUI setup
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "NoLagHubV2"
gui.ResetOnSpawn = false

-- Main Frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 400, 0, 220)
main.Position = UDim2.new(0.5, -200, 0.5, -110)
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
main.BorderSizePixel = 4
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 8)

-- Title
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "NOLAGHUBV2"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 28

-- Subtitle
local subtitle = Instance.new("TextLabel", main)
subtitle.Size = UDim2.new(0, 200, 0, 20)
subtitle.Position = UDim2.new(0, 5, 1, -25)
subtitle.BackgroundTransparency = 1
subtitle.Text = "Made by HANZSCRIPTS"
subtitle.TextColor3 = Color3.new(1, 1, 1)
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 14
subtitle.TextXAlignment = Enum.TextXAlignment.Left

-- Loading bar background
local barBG = Instance.new("Frame", main)
barBG.Size = UDim2.new(0.9, 0, 0, 20)
barBG.Position = UDim2.new(0.05, 0, 0.5, 0)
barBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Instance.new("UICorner", barBG).CornerRadius = UDim.new(0, 6)

-- Loading bar
local bar = Instance.new("Frame", barBG)
bar.Size = UDim2.new(0, 0, 1, 0)
bar.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
Instance.new("UICorner", bar).CornerRadius = UDim.new(0, 6)

-- Variables
local duration = 20 -- ⏳ loading time in seconds
local startTime = tick()
local running = true

-- Function to smoothly transition color (RGB cycle)
local function RGBTransition(part)
	local hue = 0
	while running do
		local color1 = Color3.fromHSV(hue, 1, 1)
		local color2 = Color3.fromHSV((hue + 0.1) % 1, 1, 1)
		local tweenInfo = TweenInfo.new(2, Enum.EasingStyle.Linear)
		TweenService:Create(part, tweenInfo, {BackgroundColor3 = color2}):Play()
		wait(2)
		hue = (hue + 0.1) % 1
	end
end

-- Start RGB transitions
spawn(function() RGBTransition(bar) end)
spawn(function() RGBTransition(main) end)
spawn(function()
	local hue = 0
	while running do
		main.BorderColor3 = Color3.fromHSV(hue, 1, 1)
		wait(0.03)
		hue = (hue + 0.005) % 1
	end
end)

-- Animate bar fill over 20 seconds
spawn(function()
	while running do
		local elapsed = tick() - startTime
		local percent = math.clamp(elapsed / duration, 0, 1)
		bar.Size = UDim2.new(percent, 0, 1, 0)

		if percent >= 1 then
			running = false

			-- Load external script when bar reaches 100%
			local success, err = pcall(function()
				local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()
				Spawner.Load()
			end)
			if not success then
				warn("Failed to load Spawner script:", err)
			end
		end

		wait(0.03)
	end
end)
